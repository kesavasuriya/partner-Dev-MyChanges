<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>54.0</apiVersion>
    <assignments>
        <name>Add_Id_to_retain_record_list</name>
        <label>Add Id to retain record list</label>
        <locationX>402</locationX>
        <locationY>3494</locationY>
        <assignmentItems>
            <assignToReference>Dont_change_record</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Iterate_through_Victim_Records_for_delete.Alleged_Victim_s__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Iterate_through_Victim_Records_for_delete</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_Id_to_retain_record_list_0</name>
        <label>Add Id to retain record list</label>
        <locationX>1282</locationX>
        <locationY>3494</locationY>
        <assignmentItems>
            <assignToReference>Dont_change_record</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Iterate_through_Maltreator_Records_for_delete.Alleged_Maltreator_s__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Iterate_through_Maltreator_Records_for_delete</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_records_to_Alleged_maltreator_create_lists</name>
        <label>Add records to Alleged maltreator create lists</label>
        <locationX>1018</locationX>
        <locationY>4046</locationY>
        <assignmentItems>
            <assignToReference>Create_SDM_Victim_Record.Alleged_Maltreator_s__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Iterate_through_Alleged_maltreator_list.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Create_SDM_Victim_Record.SDM__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sdmRecord.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Create_List_SDM_Alleged_Victim_Maltreator</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Create_SDM_Victim_Record</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Iterate_through_Alleged_maltreator_list</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_records_to_Alleged_victim_create_lists</name>
        <label>Add records to Alleged victim create lists</label>
        <locationX>138</locationX>
        <locationY>4046</locationY>
        <assignmentItems>
            <assignToReference>Create_SDM_Victim_Record.Alleged_Victim_s__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Iterate_through_Alleged_victim_list.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Create_SDM_Victim_Record.SDM__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sdmRecord.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Create_List_SDM_Alleged_Victim_Maltreator</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Create_SDM_Victim_Record</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Iterate_through_Alleged_victim_list</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_to_delete_list</name>
        <label>Add record to delete list</label>
        <locationX>138</locationX>
        <locationY>3494</locationY>
        <assignmentItems>
            <assignToReference>Delete_List_SDM_Alleged_Victim_Maltreator</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Iterate_through_Victim_Records_for_delete</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Iterate_through_Victim_Records_for_delete</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_to_delete_list_0</name>
        <label>Add record to delete list</label>
        <locationX>1018</locationX>
        <locationY>3494</locationY>
        <assignmentItems>
            <assignToReference>Delete_List_SDM_Alleged_Victim_Maltreator</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Iterate_through_Maltreator_Records_for_delete</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Iterate_through_Maltreator_Records_for_delete</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_contactIds</name>
        <label>Assign contactIds</label>
        <locationX>842</locationX>
        <locationY>1910</locationY>
        <assignmentItems>
            <assignToReference>Contact_IDs</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Iterate_through_junction_records.Person__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Iterate_through_junction_records</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Maltreator_IDs</name>
        <label>Assign Maltreator IDs</label>
        <locationX>842</locationX>
        <locationY>1790</locationY>
        <assignmentItems>
            <assignToReference>Maltreator_IDs</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Iterate_through_junction_records.Person__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_contactIds</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Maltreator_Records</name>
        <label>Assign Maltreator Records</label>
        <locationX>842</locationX>
        <locationY>2582</locationY>
        <assignmentItems>
            <assignToReference>Alleged_Maltreator_Records</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Iterate_through_persons</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Iterate_through_persons</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_SDM_Alleged_Maltreator_Lists</name>
        <label>Assign SDM Alleged Maltreator Lists</label>
        <locationX>842</locationX>
        <locationY>998</locationY>
        <assignmentItems>
            <assignToReference>SDM_Alleged_Maltreator_Lists</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Iterate_through_SDM_Alleged_victims_and_maltreators</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Iterate_through_SDM_Alleged_victims_and_maltreators</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_SDM_Alleged_Victim_Lists</name>
        <label>Assign SDM Alleged Victim Lists</label>
        <locationX>578</locationX>
        <locationY>998</locationY>
        <assignmentItems>
            <assignToReference>SDM_Alleged_Victim_Lists</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Iterate_through_SDM_Alleged_victims_and_maltreators</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Iterate_through_SDM_Alleged_victims_and_maltreators</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_SDM_Record</name>
        <label>Assign SDM Record</label>
        <locationX>490</locationX>
        <locationY>398</locationY>
        <assignmentItems>
            <assignToReference>sdmRecord</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_SDM_record</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>SDM_Alleged_victims_and_maltreators</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_victim_IDs</name>
        <label>Assign victim IDs</label>
        <locationX>578</locationX>
        <locationY>1790</locationY>
        <assignmentItems>
            <assignToReference>Victim_IDs</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Iterate_through_junction_records.Person__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Assign_contactIds</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Victim_Records</name>
        <label>Assign Victim Records</label>
        <locationX>578</locationX>
        <locationY>2582</locationY>
        <assignmentItems>
            <assignToReference>Alleged_Victim_Records</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Iterate_through_persons</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Iterate_through_persons</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Alleged_Maltreator_Prior_Ids_And_Values</name>
        <label>Set Alleged Maltreator Prior Ids And Values</label>
        <locationX>842</locationX>
        <locationY>878</locationY>
        <assignmentItems>
            <assignToReference>Alleged_Maltreator_Prior_ids</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Alleged_Maltreator_Default_Values</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>AllegedMaltreatorPriorValues</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Alleged_Maltreator_Formula</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_SDM_Alleged_Maltreator_Lists</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Alleged_Victim_Prior_Ids_And_Values</name>
        <label>Set Alleged Victim Prior Ids And Values</label>
        <locationX>578</locationX>
        <locationY>878</locationY>
        <assignmentItems>
            <assignToReference>AllegedVictimPriorValues</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Alleged_Victim_Formula</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Alleged_Victim_Prior_ids</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Alleged_Victim_Default_Values</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_SDM_Alleged_Victim_Lists</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Check_Alleged_victim_maltreator</name>
        <label>Check Alleged victim/maltreator</label>
        <locationX>842</locationX>
        <locationY>758</locationY>
        <defaultConnector>
            <targetReference>Iterate_through_SDM_Alleged_victims_and_maltreators</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>If_Alleged_victim</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Iterate_through_SDM_Alleged_victims_and_maltreators.Alleged_Victim_s__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Alleged_Victim_Prior_Ids_And_Values</targetReference>
            </connector>
            <label>If Alleged victim</label>
        </rules>
        <rules>
            <name>If_Alleged_maltreator</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Iterate_through_SDM_Alleged_victims_and_maltreators.Alleged_Maltreator_s__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Alleged_Maltreator_Prior_Ids_And_Values</targetReference>
            </connector>
            <label>If Alleged maltreator</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_for_delete_maltreatment_record</name>
        <label>Check for delete maltreatment record</label>
        <locationX>1282</locationX>
        <locationY>3374</locationY>
        <defaultConnector>
            <targetReference>Iterate_through_Maltreator_Records_for_delete</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>If_maltreator_record_delete</name>
            <conditionLogic>NOT(1)</conditionLogic>
            <conditions>
                <leftValueReference>Alleged_Maltreator_s</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>Iterate_through_Maltreator_Records_for_delete.Alleged_Maltreator_s__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_to_delete_list_0</targetReference>
            </connector>
            <label>If maltreator record delete</label>
        </rules>
        <rules>
            <name>If_record_retains_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Alleged_Maltreator_s</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>Iterate_through_Maltreator_Records_for_delete.Alleged_Maltreator_s__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_Id_to_retain_record_list_0</targetReference>
            </connector>
            <label>If record retains</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_for_delete_victim_record</name>
        <label>Check for delete victim record</label>
        <locationX>402</locationX>
        <locationY>3374</locationY>
        <defaultConnector>
            <targetReference>Iterate_through_Victim_Records_for_delete</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>If_victim_record_delete</name>
            <conditionLogic>NOT(1)</conditionLogic>
            <conditions>
                <leftValueReference>Alleged_Victim_s</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>Iterate_through_Victim_Records_for_delete.Alleged_Victim_s__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_to_delete_list</targetReference>
            </connector>
            <label>If victim record delete</label>
        </rules>
        <rules>
            <name>If_record_retains</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Alleged_Victim_s</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>Iterate_through_Victim_Records_for_delete.Alleged_Victim_s__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_Id_to_retain_record_list</targetReference>
            </connector>
            <label>If record retains</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_for_empty_list</name>
        <label>Check for empty list</label>
        <locationX>490</locationX>
        <locationY>4574</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>List_is_not_empty</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Delete_List_SDM_Alleged_Victim_Maltreator</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Remove_victims_from_sdm</targetReference>
            </connector>
            <label>List is not empty</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_for_SDM_Maltreator_Create</name>
        <label>Check for SDM Maltreator Create</label>
        <locationX>1150</locationX>
        <locationY>3926</locationY>
        <defaultConnector>
            <targetReference>Iterate_through_Alleged_maltreator_list</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>If_new_maltreators_added</name>
            <conditionLogic>1 AND (NOT(2))</conditionLogic>
            <conditions>
                <leftValueReference>Alleged_Maltreator_s</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>Iterate_through_Alleged_maltreator_list.Id</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Dont_change_record</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>Iterate_through_Alleged_maltreator_list.Id</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_records_to_Alleged_maltreator_create_lists</targetReference>
            </connector>
            <label>If new maltreators added</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_for_SDM_Victim_Create</name>
        <label>Check for SDM Victim Create</label>
        <locationX>270</locationX>
        <locationY>3926</locationY>
        <defaultConnector>
            <targetReference>Iterate_through_Alleged_victim_list</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>If_new_victims_added</name>
            <conditionLogic>1 AND (NOT(2))</conditionLogic>
            <conditions>
                <leftValueReference>Alleged_Victim_s</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>Iterate_through_Alleged_victim_list.Id</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Dont_change_record</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>Iterate_through_Alleged_victim_list.Id</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_records_to_Alleged_victim_create_lists</targetReference>
            </connector>
            <label>If new victims added</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Role</name>
        <label>Check Role</label>
        <locationX>842</locationX>
        <locationY>1670</locationY>
        <defaultConnector>
            <targetReference>Iterate_through_junction_records</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>If_Victim</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Iterate_through_junction_records.Person_Role_Formula__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>6</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Iterate_through_junction_records.Person__r.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Persons_Involved</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_victim_IDs</targetReference>
            </connector>
            <label>If Victim</label>
        </rules>
        <rules>
            <name>If_Maltreator</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Iterate_through_junction_records.Person_Role_Formula__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>7</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Iterate_through_junction_records.Person__r.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Persons_Involved</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Maltreator_IDs</targetReference>
            </connector>
            <label>If Maltreator</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Victim_Maltreator</name>
        <label>Check Victim/Maltreator</label>
        <locationX>842</locationX>
        <locationY>2462</locationY>
        <defaultConnector>
            <targetReference>Iterate_through_persons</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>If_Victim_1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Victim_IDs</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>Iterate_through_persons.Id</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Victim_Records</targetReference>
            </connector>
            <label>If Victim</label>
        </rules>
        <rules>
            <name>If_Maltreator_1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Maltreator_IDs</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>Iterate_through_persons.Id</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Maltreator_Records</targetReference>
            </connector>
            <label>If Maltreator</label>
        </rules>
    </decisions>
    <decisions>
        <name>If_no_sdm</name>
        <label>If no sdm</label>
        <locationX>842</locationX>
        <locationY>278</locationY>
        <defaultConnector>
            <targetReference>No_SDM_Screen</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Check_SDM</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_SDM_record</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_SDM_Record</targetReference>
            </connector>
            <label>Check SDM</label>
        </rules>
    </decisions>
    <decisions>
        <name>Victim_Maltreator_screen</name>
        <label>Victim/Maltreator screen</label>
        <locationX>490</locationX>
        <locationY>2894</locationY>
        <defaultConnector>
            <targetReference>Selected_Alleged_maltretors</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Maltreator screen</defaultConnectorLabel>
        <rules>
            <name>Victim_screen</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Showvictim</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Selected_Alleged_victims</targetReference>
            </connector>
            <label>Victim screen</label>
        </rules>
    </decisions>
    <dynamicChoiceSets>
        <name>AllegedMaltreatorChoices</name>
        <collectionReference>Alleged_Maltreator_Records</collectionReference>
        <dataType>String</dataType>
        <displayField>Name</displayField>
        <object>Contact</object>
        <valueField>Id</valueField>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>Allegedvictimchoices</name>
        <collectionReference>Alleged_Victim_Records</collectionReference>
        <dataType>String</dataType>
        <displayField>Name</displayField>
        <object>Contact</object>
        <valueField>Id</valueField>
    </dynamicChoiceSets>
    <environments>Default</environments>
    <formulas>
        <name>Alleged_Maltreator_Default_Values</name>
        <dataType>String</dataType>
        <expression>IF(ISBLANK({!Alleged_Maltreator_Prior_ids}),{!Iterate_through_SDM_Alleged_victims_and_maltreators.Alleged_Maltreator_s__c},&quot;;&quot;+{!Iterate_through_SDM_Alleged_victims_and_maltreators.Alleged_Maltreator_s__c})</expression>
    </formulas>
    <formulas>
        <name>Alleged_Maltreator_Formula</name>
        <dataType>String</dataType>
        <expression>IF(ISBLANK({!AllegedMaltreatorPriorValues}),{!Iterate_through_SDM_Alleged_victims_and_maltreators.Alleged_Maltreator_s__r.FirstName}+&quot; &quot;+{!Iterate_through_SDM_Alleged_victims_and_maltreators.Alleged_Maltreator_s__r.LastName},&quot;;&quot;+{!Iterate_through_SDM_Alleged_victims_and_maltreators.Alleged_Maltreator_s__r.FirstName}+&quot; &quot;+{!Iterate_through_SDM_Alleged_victims_and_maltreators.Alleged_Maltreator_s__r.LastName})</expression>
    </formulas>
    <formulas>
        <name>Alleged_Victim_Default_Values</name>
        <dataType>String</dataType>
        <expression>IF(ISBLANK({!Alleged_Victim_Prior_ids}),{!Iterate_through_SDM_Alleged_victims_and_maltreators.Alleged_Victim_s__c},&quot;;&quot;+{!Iterate_through_SDM_Alleged_victims_and_maltreators.Alleged_Victim_s__c})</expression>
    </formulas>
    <formulas>
        <name>Alleged_Victim_Formula</name>
        <dataType>String</dataType>
        <expression>IF(ISBLANK({!AllegedVictimPriorValues}),{!Iterate_through_SDM_Alleged_victims_and_maltreators.Alleged_Victim_s__r.FirstName}+&quot; &quot;+{!Iterate_through_SDM_Alleged_victims_and_maltreators.Alleged_Victim_s__r.LastName},&quot;;&quot;+{!Iterate_through_SDM_Alleged_victims_and_maltreators.Alleged_Victim_s__r.FirstName}+&quot; &quot;+{!Iterate_through_SDM_Alleged_victims_and_maltreators.Alleged_Victim_s__r.LastName})</expression>
    </formulas>
    <interviewLabel>SDM Alleged Victim Maltreator {!$Flow.CurrentDateTime}</interviewLabel>
    <label>SDM Alleged Victim Maltreator</label>
    <loops>
        <name>Iterate_through_Alleged_maltreator_list</name>
        <label>Iterate through Alleged_maltreator_list</label>
        <locationX>930</locationX>
        <locationY>3806</locationY>
        <collectionReference>Alleged_Maltreator_Records</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Check_for_SDM_Maltreator_Create</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_Alleged_victim_records</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Iterate_through_Alleged_victim_list</name>
        <label>Iterate through Alleged_victim_list</label>
        <locationX>50</locationX>
        <locationY>3806</locationY>
        <collectionReference>Alleged_Victim_Records</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Check_for_SDM_Victim_Create</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_Alleged_victim_records</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Iterate_through_junction_records</name>
        <label>Iterate through junction records</label>
        <locationX>490</locationX>
        <locationY>1550</locationY>
        <collectionReference>Get_Junction_Object_Record</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Check_Role</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Alleged_victim_and_maltreators</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Iterate_through_Maltreator_Records_for_delete</name>
        <label>Iterate through Maltreator Records for delete</label>
        <locationX>930</locationX>
        <locationY>3254</locationY>
        <collectionReference>SDM_Alleged_Maltreator_Lists</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Check_for_delete_maltreatment_record</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Iterate_through_Alleged_maltreator_list</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Iterate_through_persons</name>
        <label>Iterate through persons</label>
        <locationX>490</locationX>
        <locationY>2342</locationY>
        <collectionReference>Alleged_victim_and_maltreators</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Check_Victim_Maltreator</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Victim_Maltreator_screen</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Iterate_through_SDM_Alleged_victims_and_maltreators</name>
        <label>Iterate through SDM Alleged victims and maltreators</label>
        <locationX>490</locationX>
        <locationY>638</locationY>
        <collectionReference>SDM_Alleged_victims_and_maltreators</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Check_Alleged_victim_maltreator</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Get_Record_Type_Id</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Iterate_through_Victim_Records_for_delete</name>
        <label>Iterate through Victim Records for delete</label>
        <locationX>50</locationX>
        <locationY>3254</locationY>
        <collectionReference>SDM_Alleged_Victim_Lists</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Check_for_delete_victim_record</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Iterate_through_Alleged_victim_list</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>Create_Alleged_victim_records</name>
        <label>Create Alleged victim records</label>
        <locationX>490</locationX>
        <locationY>4454</locationY>
        <connector>
            <targetReference>Check_for_empty_list</targetReference>
        </connector>
        <inputReference>Create_List_SDM_Alleged_Victim_Maltreator</inputReference>
    </recordCreates>
    <recordDeletes>
        <name>Remove_victims_from_sdm</name>
        <label>Remove victims from sdm</label>
        <locationX>358</locationX>
        <locationY>4694</locationY>
        <inputReference>Delete_List_SDM_Alleged_Victim_Maltreator</inputReference>
    </recordDeletes>
    <recordLookups>
        <name>Alleged_victim_and_maltreators</name>
        <label>Alleged victim and maltreators</label>
        <locationX>490</locationX>
        <locationY>2222</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Iterate_through_persons</targetReference>
        </connector>
        <filterLogic>or</filterLogic>
        <filters>
            <field>Id</field>
            <operator>In</operator>
            <value>
                <elementReference>Victim_IDs</elementReference>
            </value>
        </filters>
        <filters>
            <field>Id</field>
            <operator>In</operator>
            <value>
                <elementReference>Maltreator_IDs</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Contact</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Name</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Junction_Object_Record</name>
        <label>Get Junction Object Record</label>
        <locationX>490</locationX>
        <locationY>1430</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Iterate_through_junction_records</targetReference>
        </connector>
        <filterLogic>(1 AND 2) OR(3 AND 4) OR (5 AND 6)</filterLogic>
        <filters>
            <field>Intake__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>sdmRecord.Intake__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Intake__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Investigation__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>sdmRecord.Investigation__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Investigation__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Service_Case__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>sdmRecord.Service_Case__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Service_Case__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Person__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Record_Type_Id</name>
        <label>Get Record Type Id</label>
        <locationX>490</locationX>
        <locationY>1310</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Junction_Object_Record</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Persons Involved</stringValue>
            </value>
        </filters>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Contact</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_SDM_record</name>
        <label>Get SDM record</label>
        <locationX>842</locationX>
        <locationY>158</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>If_no_sdm</targetReference>
        </connector>
        <filterLogic>or</filterLogic>
        <filters>
            <field>Service_Case__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>intake_investigation_serviceCaseId</elementReference>
            </value>
        </filters>
        <filters>
            <field>Intake__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>intake_investigation_serviceCaseId</elementReference>
            </value>
        </filters>
        <filters>
            <field>Investigation__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>intake_investigation_serviceCaseId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>SDM__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>SDM_Alleged_victims_and_maltreators</name>
        <label>SDM Alleged victims and maltreators</label>
        <locationX>490</locationX>
        <locationY>518</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Iterate_through_SDM_Alleged_victims_and_maltreators</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SDM__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>sdmRecord.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>SDM_Alleged_Victim_and_Maltreator__c</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Alleged_Victim_s__c</queriedFields>
        <queriedFields>Alleged_Maltreator_s__c</queriedFields>
        <queriedFields>SDM__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <screens>
        <name>Alleged_maltreator_screen</name>
        <label>Alleged maltreator screen</label>
        <locationX>930</locationX>
        <locationY>3134</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <backButtonLabel>Cancel</backButtonLabel>
        <connector>
            <targetReference>Iterate_through_Maltreator_Records_for_delete</targetReference>
        </connector>
        <fields>
            <name>Alleged_Maltreator_s</name>
            <choiceReferences>AllegedMaltreatorChoices</choiceReferences>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>Alleged_Maltreator_Prior_ids</elementReference>
            </defaultValue>
            <fieldText>Alleged Maltreator(s)</fieldText>
            <fieldType>MultiSelectCheckboxes</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <nextOrFinishButtonLabel>Save</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Alleged_victim_screen_0</name>
        <label>Alleged victim screen</label>
        <locationX>50</locationX>
        <locationY>3134</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <backButtonLabel>Cancel</backButtonLabel>
        <connector>
            <targetReference>Iterate_through_Victim_Records_for_delete</targetReference>
        </connector>
        <fields>
            <name>Alleged_Victim_s</name>
            <choiceReferences>Allegedvictimchoices</choiceReferences>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>Alleged_Victim_Prior_ids</elementReference>
            </defaultValue>
            <fieldText>Alleged Victim(s)</fieldText>
            <fieldType>MultiSelectCheckboxes</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <nextOrFinishButtonLabel>Save</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>No_SDM_Screen</name>
        <label>No SDM Screen</label>
        <locationX>1194</locationX>
        <locationY>398</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>NoScreen</name>
            <fieldText>&lt;p&gt;  &lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>false</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Selected_Alleged_maltretors</name>
        <label>Selected Alleged maltretors</label>
        <locationX>930</locationX>
        <locationY>3014</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Alleged_maltreator_screen</targetReference>
        </connector>
        <fields>
            <name>DisplayAllegedvictims_0</name>
            <fieldText>&lt;p&gt;&lt;b&gt;Alleged Maltreator(s)&lt;/b&gt; : {!AllegedMaltreatorPriorValues}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>Add/Reset Alleged Maltreator(s)</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Selected_Alleged_victims</name>
        <label>Selected Alleged victims</label>
        <locationX>50</locationX>
        <locationY>3014</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Alleged_victim_screen_0</targetReference>
        </connector>
        <fields>
            <name>DisplayAllegedvictims</name>
            <fieldText>&lt;p&gt;&lt;b&gt;Alleged Victim(s)&lt;/b&gt; :  {!AllegedVictimPriorValues}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>Add/Reset Alleged Victim(s)</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <start>
        <locationX>716</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Get_SDM_record</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>Alleged_Maltreator_Prior_ids</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Alleged_Maltreator_Records</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Contact</objectType>
    </variables>
    <variables>
        <name>Alleged_Victim_Prior_ids</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Alleged_Victim_Records</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Contact</objectType>
    </variables>
    <variables>
        <name>AllegedMaltreatorPriorValues</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>AllegedVictimPriorValues</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Contact_IDs</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Create_List_SDM_Alleged_Victim_Maltreator</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SDM_Alleged_Victim_and_Maltreator__c</objectType>
    </variables>
    <variables>
        <name>Create_SDM_Victim_Record</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SDM_Alleged_Victim_and_Maltreator__c</objectType>
    </variables>
    <variables>
        <name>currentItem_Alleged_Maltreator_Lists_0</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Contact</objectType>
    </variables>
    <variables>
        <name>currentItem_Alleged_victim_list</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Contact</objectType>
    </variables>
    <variables>
        <name>currentItem_SDM_Alleged_Maltreator_Records</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SDM_Alleged_Victim_and_Maltreator__c</objectType>
    </variables>
    <variables>
        <name>currentItem_SDM_Alleged_Victim_Records</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SDM_Alleged_Victim_and_Maltreator__c</objectType>
    </variables>
    <variables>
        <name>Delete_List_SDM_Alleged_Victim_Maltreator</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SDM_Alleged_Victim_and_Maltreator__c</objectType>
    </variables>
    <variables>
        <name>Dont_change_record</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>intake_investigation_serviceCaseId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Maltreator_IDs</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>SDM_Alleged_Maltreator_Lists</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SDM_Alleged_Victim_and_Maltreator__c</objectType>
    </variables>
    <variables>
        <name>SDM_Alleged_Victim_Lists</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SDM_Alleged_Victim_and_Maltreator__c</objectType>
    </variables>
    <variables>
        <name>sdmRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SDM__c</objectType>
    </variables>
    <variables>
        <name>Selected_Alleged_Victims_from_Screen</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Showvictim</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Victim_IDs</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
